# Agent-D ä»»åŠ¡åˆ†é…

**Agent æ ‡è¯†**: Agent-D  
**ä»»åŠ¡**: T2.1 + T3.2  
**æŠ€èƒ½è¦æ±‚**: Rust asyncã€æ¶æ„è®¾è®¡ã€ç³»ç»Ÿé›†æˆ  
**ä¼˜å…ˆçº§**: P1  
**é¢„ä¼°æ€»æ—¶é—´**: 8 å°æ—¶

---

## ä»»åŠ¡æ¸…å•

### ä»»åŠ¡ 1: T2.1 - P2P Network çŠ¶æ€ç®¡ç†
**æ–‡ä»¶**: `plan/tasks/T2.1_p2p_network/README.md`  
**æ—¶é—´**: 5h  
**çŠ¶æ€**: ğŸ”´ ç­‰å¾… T1.1 + T1.2 å®Œæˆåå¼€å§‹

**æ ¸å¿ƒç›®æ ‡**:
- å®ç°å…¨å±€ P2P ç½‘ç»œå•ä¾‹
- æ•´åˆ MdnsService å’Œ QuicTransport
- æä¾› start/stop/çŠ¶æ€æŸ¥è¯¢

**å…³é”®æ¥å£**:
```rust
static P2P_INSTANCE: OnceCell<RwLock<Option<Arc<P2PNetwork>>>> = OnceCell::const_new();

impl P2PNetwork {
    pub async fn global() -> Option<Arc<Self>>;
    pub async fn start(config: P2PConfig) -> Result<Arc<Self>>;
    pub async fn stop() -> Result<()>;
    pub async fn connect(&self, addr: &str) -> Result<()>;
    pub async fn discovered_peers(&self) -> Vec<PeerInfo>;
}
```

**ä¾èµ–**:
- T1.1 (Agent-A): `MdnsService`
- T1.2 (Agent-B): `QuicTransport`

---

### ä»»åŠ¡ 2: T3.2 - p2p connect/disconnect å‘½ä»¤
**æ–‡ä»¶**: `plan/tasks/T3.2_p2p_connect_cmd/README.md`  
**æ—¶é—´**: 3h  
**çŠ¶æ€**: ğŸ”´ ç­‰å¾… T2.1 å®Œæˆåå¼€å§‹

**æ ¸å¿ƒç›®æ ‡**:
- å®ç°çœŸå®çš„èŠ‚ç‚¹è¿æ¥/æ–­å¼€
- æ›¿æ¢æ¨¡æ‹Ÿä»£ç 

**å…³é”®ä¿®æ”¹**:
```rust
async fn connect_node(address: &str, node_id: Option<&str>) -> Result<()> {
    let network = P2PNetwork::global().await?;
    network.connect(address).await?;
    println!("âœ… Connected to {}", address);
    Ok(())
}
```

---

## æ¶æ„ä½ç½®

```
ä½ æ˜¯æ¶æ„å¸ˆï¼éœ€è¦æ•´åˆï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  T1.1 (Agent-A) â”€â”€â”€â”€â†’ MdnsService                   â”‚
â”‚                         â†“                           â”‚
â”‚  T1.2 (Agent-B) â”€â”€â”€â”€â†’ QuicTransport â”€â”€â”€â”€â”           â”‚
â”‚                         â†“                â†“          â”‚
â”‚  T2.1 (ä½ ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ P2PNetwork â†â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                         â†“                           â”‚
â”‚  T3.1 (Agent-A)       T3.2 (ä½ )                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…³é”®æŒ‘æˆ˜

### 1. å…¨å±€çŠ¶æ€ç®¡ç†
- ä½¿ç”¨ `OnceCell` + `RwLock` å®ç°å•ä¾‹
- å¤„ç†å¹¶å‘å¯åŠ¨/åœæ­¢
- é¿å…æ­»é”

### 2. èµ„æºç”Ÿå‘½å‘¨æœŸ
- MdnsService å’Œ QuicTransport çš„æ­£ç¡®å…³é—­é¡ºåº
- ä¼˜é›…å¤„ç†æ¸…ç†

### 3. é”™è¯¯å¤„ç†
- å¯åŠ¨å¤±è´¥æ—¶çš„èµ„æºå›æ»š
- éƒ¨åˆ†å¤±è´¥çš„çŠ¶æ€æ¢å¤

---

## éªŒæ”¶æ ‡å‡†

### T2.1 éªŒæ”¶
- [ ] å¤šæ¬¡è°ƒç”¨ start è¿”å›ç›¸åŒå®ä¾‹
- [ ] stop åèµ„æºå®Œå…¨é‡Šæ”¾
- [ ] çŠ¶æ€ä¿¡æ¯å®æ—¶å‡†ç¡®
- [ ] æ”¯æŒå¹¶å‘è®¿é—®ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
- [ ] å•æµ‹è¦†ç›–ç‡ > 80%

### T3.2 éªŒæ”¶
- [ ] è¿æ¥çœŸå®å»ºç«‹ QUIC è¿æ¥
- [ ] æ–­å¼€åèµ„æºé‡Šæ”¾
- [ ] è¿æ¥å¤±è´¥è¿”å›å…·ä½“é”™è¯¯

---

## ä¾èµ–åè°ƒ

**ä½ å¿…é¡»ç­‰å¾…**:
- T1.1 å®Œæˆï¼ˆMdnsServiceï¼‰
- T1.2 å®Œæˆï¼ˆQuicTransportï¼‰

**é˜»å¡çš„ä»»åŠ¡**:
- T3.1 (Agent-A) - éœ€è¦ä½ çš„ P2PNetwork
- T3.2 (ä½ ) - éœ€è¦ P2PNetwork
- T4.1 (Agent-B) - éœ€è¦ä½ çš„ P2PNetwork
- T4.2 (Agent-F) - éœ€è¦ P2PNetwork

**ä½ æ˜¯æœ€å…³é”®çš„é˜»å¡ç‚¹ï¼**

---

## å»ºè®®å·¥ä½œæµç¨‹

```
1. ç­‰å¾… T1.1 å’Œ T1.2 PR åˆå¹¶
2. æ‹‰å–æœ€æ–°ä»£ç 
3. é˜…è¯»ä»–ä»¬çš„æ¥å£å®ç°
4. è®¾è®¡ P2PNetwork æ•´åˆæ–¹æ¡ˆ
5. åˆ›å»ºåˆ†æ”¯: git checkout -b agent-d/t2.1-network
6. å®ç°å¹¶æµ‹è¯•
7. å°½å¿«æäº¤ PRï¼ˆå…¶ä»–äººéƒ½åœ¨ç­‰ä½ ï¼ï¼‰
```

---

## å¼€å§‹å·¥ä½œ

1. ç›®å‰çŠ¶æ€: **ç­‰å¾… T1.1 å’Œ T1.2**
2. å¯ä»¥å…ˆé˜…è¯»: `plan/tasks/T2.1_p2p_network/README.md`
3. å‡†å¤‡æ•´åˆæ–¹æ¡ˆ

---

**ä½ æ˜¯å…³é”®è·¯å¾„ï¼å®Œæˆåå¤šä¸ªä»»åŠ¡å¯ä»¥å¹¶è¡Œæ¨è¿›ã€‚**
