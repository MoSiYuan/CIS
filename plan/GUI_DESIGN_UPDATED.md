# CIS GUI æ›´æ–°è®¾è®¡æ–¹æ¡ˆï¼ˆåŸºäºéœ€æ±‚æ¾„æ¸…ï¼‰

## 1. éœ€æ±‚ç¡®è®¤æ€»ç»“

### 1.1 èŠ‚ç‚¹å‘ç°æœºåˆ¶

| ç±»å‹ | å‘ç°æ–¹å¼ | æ˜¾ç¤ºé¢œè‰² | æ ‡è¯†æ ¼å¼ |
|------|---------|---------|----------|
| **å†…ç½‘èŠ‚ç‚¹** | mDNS è‡ªåŠ¨å‘ç° | ğŸŸ  ç°æ©™è‰² | `hostname` (å¦‚ Munin-macmini) |
| **äº‘ç«¯ç§å­** | å›ºå®š IP/åŸŸå + æ‰‹åŠ¨è¾“å…¥ DID | ğŸ”µ ç°è“è‰² | `host@DID` (å¦‚ seed.cis.dev@did:cis:node123:abc) |

### 1.2 "+" æŒ‰é’®è¡Œä¸º

```
ç‚¹å‡» [+] â†’ å¼¹å‡ºèœå•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æ‰«æå†…ç½‘èŠ‚ç‚¹...          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ“ æ‰‹åŠ¨æ·»åŠ å†…ç½‘èŠ‚ç‚¹          â”‚
â”‚  â˜ï¸  æ·»åŠ äº‘ç«¯ç§å­èŠ‚ç‚¹         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é€‰æ‹©"æ·»åŠ äº‘ç«¯ç§å­èŠ‚ç‚¹":
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ·»åŠ äº‘ç«¯ç§å­èŠ‚ç‚¹                    â”‚
â”‚                                    â”‚
â”‚ åœ°å€: [seed.cis.dev:6767    ]     â”‚
â”‚ DID:  [did:cis:node123:abc  ]     â”‚
â”‚      ğŸ”‘ ç±»ä¼¼ LLM API Key çš„éªŒè¯     â”‚
â”‚                                    â”‚
â”‚      [æµ‹è¯•è¿æ¥]  [æ·»åŠ ]  [å–æ¶ˆ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 äº‘ç«¯èŠ‚ç‚¹ DID éªŒè¯æœºåˆ¶

```rust
// äº‘ç«¯èŠ‚ç‚¹è¿æ¥æµç¨‹
pub async fn connect_cloud_node(address: &str, expected_did: &str) -> Result<()> {
    // 1. TCP è¿æ¥åˆ°äº‘ç«¯èŠ‚ç‚¹
    let stream = TcpStream::connect(address).await?;
    
    // 2. WebSocket æ¡æ‰‹
    let ws = WebSocket::new(stream).await?;
    
    // 3. æ¥æ”¶èŠ‚ç‚¹å£°æ˜ï¼ˆåŒ…å«å…¶ DIDï¼‰
    let node_info = ws.receive_node_info().await?;
    
    // 4. DID éªŒè¯ï¼ˆå…³é”®ï¼ï¼‰
    if node_info.did != expected_did {
        return Err(AuthenticationError::InvalidDID {
            expected: expected_did.to_string(),
            actual: node_info.did,
        });
    }
    
    // 5. éªŒè¯é€šè¿‡ï¼Œå°è¯• NAT æ‰“æ´
    let nat_result = attempt_hole_punching(ws).await;
    
    // 6. é€šè¿‡äº‘ç«¯èŠ‚ç‚¹å‘ç°å…¶ä»–èŠ‚ç‚¹
    let discovered_nodes = ws.query_known_peers().await?;
    
    Ok(())
}
```

**å®‰å…¨æ¨¡å‹**ï¼š
- åªæœ‰éƒ¨ç½²è€…çŸ¥é“äº‘ç«¯èŠ‚ç‚¹çš„ DID
- æ”»å‡»è€…å³ä½¿çŸ¥é“ IP åœ°å€ï¼Œæ²¡æœ‰ DID ä¹Ÿæ— æ³•ä¼ªè£…
- ç±»ä¼¼ LLM API Key çš„å®‰å…¨çº§åˆ«

---

## 2. ç•Œé¢è®¾è®¡æ›´æ–°

### 2.1 ä¸¤æ’èŠ‚ç‚¹æ ‡ç­¾é¡µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CIS GUI                                           [_] [â–¡] [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Chat / Agent Panel                     â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  [Claude] [Kimi]  â† AI Provider é€‰æ‹©                     â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  Claude: Hello! How can I help you?                      â”‚   â”‚
â”‚  â”‚  > Write a Rust function to...                           â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ  Local Network (mDNS è‡ªåŠ¨å‘ç°)                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”                â”‚
â”‚ â”‚ âœ¨Munin-mini â”‚ â”‚ Hugin-pc â”‚ â”‚Hugin-mbp â”‚ â”‚ + â”‚                â”‚
â”‚ â”‚    ğŸŸ  Online â”‚ â”‚   ğŸŸ      â”‚ â”‚   ğŸŸ      â”‚ â”‚   â”‚                â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜ï¸  Cloud Seeds (å›ºå®š IP/åŸŸå + DID éªŒè¯)                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”                             â”‚
â”‚ â”‚seed.cis.dev  â”‚ â”‚cloud-nodeâ”‚ â”‚ + â”‚                             â”‚
â”‚ â”‚  ğŸ”µ Verified â”‚ â”‚  ğŸ”µ P2P  â”‚ â”‚   â”‚                             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é¢œè‰²è§„èŒƒï¼š
- ğŸŸ  èƒŒæ™¯ #D4A574 (ç°æ©™è‰²) + è¾¹æ¡† #B8935F: å†…ç½‘èŠ‚ç‚¹
- ğŸ”µ èƒŒæ™¯ #7BA7D4 (ç°è“è‰²) + è¾¹æ¡† #5A8AB8: äº‘ç«¯ç§å­èŠ‚ç‚¹
- âœ¨ æäº®/å‘å…‰æ•ˆæœ: å½“å‰æ´»è·ƒèŠ‚ç‚¹ (å¤–å‘å…‰ 4px rgba(255,255,255,0.5))
- âšª ç°è‰²: ç¦»çº¿èŠ‚ç‚¹
- ğŸŸ¢ ç»¿è‰²åœ†ç‚¹: åœ¨çº¿æŒ‡ç¤º

äº‘ç«¯èŠ‚ç‚¹çŠ¶æ€ï¼š
- ğŸ”µ Verified: DID éªŒè¯é€šè¿‡ï¼Œè¿æ¥æ­£å¸¸
- ğŸ”µ P2P: æ‰“æ´æˆåŠŸï¼Œç›´è¿å»ºç«‹
- ğŸ”µ Relay: é€šè¿‡äº‘ç«¯èŠ‚ç‚¹ä¸­ç»§
- âšª Offline: è¿æ¥å¤±è´¥
```

### 2.2 èŠ‚ç‚¹ä¿¡æ¯å±•ç¤º

```
é¼ æ ‡æ‚¬åœæˆ–ç‚¹å‡»å³é”®èœå•ï¼š

å†…ç½‘èŠ‚ç‚¹ Munin-macmini:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± Munin-macmini                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ç±»å‹: å†…ç½‘èŠ‚ç‚¹ (mDNS å‘ç°)         â”‚
â”‚ åœ°å€: 192.168.1.100:6767           â”‚
â”‚ DID:  did:cis:munin:abc123...      â”‚
â”‚ å»¶è¿Ÿ: 2ms                          â”‚
â”‚ çŠ¶æ€: ğŸŸ¢ Online                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ [åˆ‡æ¢] [Ping] [æŸ¥çœ‹è¯¦æƒ…] [åˆ é™¤]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

äº‘ç«¯èŠ‚ç‚¹ seed.cis.dev:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ï¸  seed.cis.dev                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ç±»å‹: äº‘ç«¯ç§å­èŠ‚ç‚¹                 â”‚
â”‚ åœ°å€: seed.cis.dev:6767            â”‚
â”‚ DID:  did:cis:seed:xyz789...       â”‚
â”‚ âœ“ DID éªŒè¯é€šè¿‡                     â”‚
â”‚ è¿æ¥: P2P ç›´è¿ (æ‰“æ´æˆåŠŸ)          â”‚
â”‚ å»¶è¿Ÿ: 45ms                         â”‚
â”‚ å·²çŸ¥èŠ‚ç‚¹: 12 ä¸ª                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ [åˆ‡æ¢] [Ping] [å‘ç°èŠ‚ç‚¹] [ç¼–è¾‘]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ•°æ®ç»“æ„æ›´æ–°

### 3.1 èŠ‚ç‚¹é…ç½®

```rust
// cis-core/src/matrix/federation/types.rs

/// èŠ‚ç‚¹æ¥æºç±»å‹
#[derive(Debug, Clone, Serialize, Deserialize, PartialEq)]
pub enum NodeSource {
    /// mDNS å±€åŸŸç½‘å‘ç°
    Mdns,
    /// æ‰‹åŠ¨é…ç½®ï¼ˆå†…ç½‘ï¼‰
    Manual,
    /// äº‘ç«¯ç§å­èŠ‚ç‚¹ï¼ˆå›ºå®š IP/åŸŸå + DID éªŒè¯ï¼‰
    CloudSeed {
        /// é¢„æœŸçš„ DIDï¼ˆç”¨äºéªŒè¯ï¼‰
        expected_did: String,
        /// éªŒè¯æ˜¯å¦é€šè¿‡
        verified: bool,
    },
}

/// å®Œæ•´çš„èŠ‚ç‚¹ä¿¡æ¯
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct NodeConfig {
    /// èŠ‚ç‚¹ ID
    pub id: String,
    /// æ˜¾ç¤ºåç§°
    pub name: String,
    /// ç½‘ç»œåœ°å€
    pub address: String,
    /// ç«¯å£
    pub port: u16,
    /// èŠ‚ç‚¹æ¥æº
    pub source: NodeSource,
    /// å½“å‰è¿æ¥çŠ¶æ€
    pub status: NodeStatus,
    /// å®é™… DIDï¼ˆè¿æ¥åè·å–ï¼‰
    pub actual_did: Option<String>,
    /// è¿æ¥ç±»å‹
    pub connection_type: Option<ConnectionType>,
    /// å»¶è¿Ÿ (ms)
    pub latency_ms: Option<u64>,
}

/// è¿æ¥ç±»å‹
#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum ConnectionType {
    /// ç›´è¿ï¼ˆå±€åŸŸç½‘æˆ–æ‰“æ´æˆåŠŸï¼‰
    Direct,
    /// é€šè¿‡äº‘ç«¯èŠ‚ç‚¹ä¸­ç»§
    Relay { via: String },
    /// äº‘ç«¯èŠ‚ç‚¹æœ¬èº«
    Cloud,
}

impl NodeConfig {
    /// è·å–æ˜¾ç¤ºæ ‡è¯†ç¬¦
    /// å†…ç½‘: "Munin-macmini"
    /// äº‘ç«¯: "seed.cis.dev@did:cis:seed:abc..."
    pub fn display_id(&self) -> String {
        match &self.source {
            NodeSource::CloudSeed { expected_did, .. } => {
                format!("{}@{}", self.address, expected_did)
            }
            _ => self.name.clone(),
        }
    }
    
    /// éªŒè¯ DID æ˜¯å¦åŒ¹é…
    pub fn verify_did(&self) -> bool {
        match &self.source {
            NodeSource::CloudSeed { expected_did, .. } => {
                match &self.actual_did {
                    Some(actual) => actual == expected_did,
                    None => false,
                }
            }
            _ => true, // å†…ç½‘èŠ‚ç‚¹æ— éœ€éªŒè¯
        }
    }
}
```

---

## 4. äº‘ç«¯èŠ‚ç‚¹å·¥ä½œæµç¨‹

```
ç”¨æˆ·æ·»åŠ äº‘ç«¯èŠ‚ç‚¹:
    è¾“å…¥: seed.cis.dev:6767
    è¾“å…¥: did:cis:seed:node123:abc456 (é¢„çŸ¥çš„ DID)
    
        â†“
        
å°è¯•è¿æ¥äº‘ç«¯èŠ‚ç‚¹:
    1. TCP è¿æ¥ seed.cis.dev:6767
    2. WebSocket æ¡æ‰‹
    3. æ¥æ”¶èŠ‚ç‚¹çš„ DID å£°æ˜
    4. æ¯”å¯¹: å£°æ˜çš„ DID == è¾“å…¥çš„ DID ?
    
        â†“ éªŒè¯é€šè¿‡
        
èº«ä»½éªŒè¯æˆåŠŸ:
    - æ ‡è®°ä¸º ğŸ”µ Verified
    - é€šè¿‡è¯¥èŠ‚ç‚¹æŸ¥è¯¢å·²çŸ¥èŠ‚ç‚¹åˆ—è¡¨
    - å°è¯•ä¸å…¶ä»–èŠ‚ç‚¹å»ºç«‹ P2P è¿æ¥
    
        â†“
        
NAT æ‰“æ´æµç¨‹:
    1. é€šè¿‡äº‘ç«¯èŠ‚ç‚¹äº¤æ¢å…¬ç½‘åœ°å€
    2. åŒæ—¶å‘é€ UDP æ‰“æ´åŒ…
    3. æ£€æµ‹æ‰“æ´ç»“æœ
    4. æˆåŠŸ: æ ‡è®° ğŸ”µ P2P (ç›´è¿)
    5. å¤±è´¥: æ ‡è®° ğŸ”µ Relay (äº‘ç«¯ä¸­ç»§)
```

---

## 5. GUI äº¤äº’æµç¨‹

### 5.1 æ·»åŠ äº‘ç«¯èŠ‚ç‚¹

```typescript
// å‰ç«¯æµç¨‹

async function addCloudNode() {
    // å¼¹å‡ºè¾“å…¥å¯¹è¯æ¡†
    const { address, did } = await showDialog({
        title: 'æ·»åŠ äº‘ç«¯ç§å­èŠ‚ç‚¹',
        fields: [
            { name: 'address', label: 'åœ°å€', placeholder: 'seed.cis.dev:6767' },
            { name: 'did', label: 'DID', placeholder: 'did:cis:node123:abc456' },
        ]
    });
    
    // æµ‹è¯•è¿æ¥å¹¶éªŒè¯ DID
    const result = await invoke('test_cloud_node', { address, did });
    
    if (result.verified) {
        // æ·»åŠ æˆåŠŸ
        await invoke('add_node', {
            config: {
                address,
                source: { type: 'CloudSeed', expected_did: did },
            }
        });
        
        showNotification('âœ… äº‘ç«¯èŠ‚ç‚¹æ·»åŠ æˆåŠŸï¼ŒDID éªŒè¯é€šè¿‡');
    } else {
        showError('âŒ DID éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥çš„ DID æ˜¯å¦æ­£ç¡®');
    }
}
```

### 5.2 èŠ‚ç‚¹åˆ‡æ¢

```typescript
async function switchNode(nodeId: string) {
    const node = nodes.find(n => n.id === nodeId);
    
    // æ˜¾ç¤ºåˆ‡æ¢ä¸­çŠ¶æ€
    setNodeStatus(nodeId, 'connecting');
    
    try {
        // åç«¯åˆ‡æ¢è¿æ¥
        await invoke('switch_node', { nodeId });
        
        // å¦‚æœæ˜¯äº‘ç«¯èŠ‚ç‚¹ï¼Œé€šè¿‡å®ƒå‘ç°å…¶ä»–èŠ‚ç‚¹
        if (node.source.type === 'CloudSeed') {
            const discovered = await invoke('discover_via_cloud', { nodeId });
            addDiscoveredNodes(discovered);
        }
        
        setActiveNode(nodeId);
        showNotification(`âœ… å·²åˆ‡æ¢åˆ° ${node.name}`);
    } catch (err) {
        showError(`âŒ åˆ‡æ¢å¤±è´¥: ${err}`);
    }
}
```

---

## 6. å®ç°ä¼˜å…ˆçº§

### Phase 1: åŸºç¡€æ¡†æ¶ (Week 1)
- [ ] Tauri é¡¹ç›®åˆå§‹åŒ–
- [ ] ä¸¤æ’èŠ‚ç‚¹æ ‡ç­¾é¡µç»„ä»¶ï¼ˆå†…ç½‘/äº‘ç«¯ï¼‰
- [ ] èŠ‚ç‚¹æ•°æ®ç»“æ„æ›´æ–°

### Phase 2: å†…ç½‘èŠ‚ç‚¹ (Week 1-2)
- [ ] mDNS å‘ç°é›†æˆ
- [ ] å†…ç½‘èŠ‚ç‚¹è‡ªåŠ¨æ·»åŠ 
- [ ] èŠ‚ç‚¹çŠ¶æ€æ˜¾ç¤ºï¼ˆç°æ©™è‰²ï¼‰

### Phase 3: äº‘ç«¯èŠ‚ç‚¹ (Week 2)
- [ ] DID éªŒè¯æœºåˆ¶
- [ ] äº‘ç«¯èŠ‚ç‚¹æ‰‹åŠ¨æ·»åŠ ç•Œé¢
- [ ] äº‘ç«¯èŠ‚ç‚¹çŠ¶æ€æ˜¾ç¤ºï¼ˆç°è“è‰²ï¼‰

### Phase 4: ç½‘ç»œåŠŸèƒ½ (Week 3)
- [ ] é€šè¿‡äº‘ç«¯èŠ‚ç‚¹å‘ç°å…¶ä»–èŠ‚ç‚¹
- [ ] NAT æ‰“æ´å°è¯•
- [ ] è¿æ¥ç±»å‹æ˜¾ç¤ºï¼ˆDirect/Relayï¼‰

### Phase 5: IM åŠŸèƒ½ (Week 3-4)
- [ ] Matrix å®¢æˆ·ç«¯é›†æˆ
- [ ] èŠå¤©ç•Œé¢
- [ ] å¤šèŠ‚ç‚¹æ¶ˆæ¯åŒæ­¥

---

## 7. å…³é”®ä»£ç ç‰‡æ®µ

### 7.1 èŠ‚ç‚¹æ ‡ç­¾ç»„ä»¶

```tsx
// src/components/NodeTab/NodeTab.tsx

interface NodeTabProps {
    node: NodeConfig;
    isActive: boolean;
    onClick: () => void;
}

export function NodeTab({ node, isActive, onClick }: NodeTabProps) {
    // æ ¹æ®æ¥æºç¡®å®šé¢œè‰²
    const colorClass = node.source === 'CloudSeed' 
        ? 'cloud-blue'   // ç°è“è‰²
        : 'local-orange'; // ç°æ©™è‰²
    
    // æ´»è·ƒçŠ¶æ€æ·»åŠ æäº®æ•ˆæœ
    const activeClass = isActive ? 'active-glow' : '';
    
    return (
        <div 
            className={`node-tab ${colorClass} ${activeClass}`}
            onClick={onClick}
        >
            <span className="status-dot">{getStatusIcon(node.status)}</span>
            <span className="node-name">{node.name}</span>
            {node.source === 'CloudSeed' && (
                <span className="verified-badge">âœ“</span>
            )}
        </div>
    );
}
```

### 7.2 CSS æ ·å¼

```css
/* å†…ç½‘èŠ‚ç‚¹ - ç°æ©™è‰² */
.node-tab.local-orange {
    background: linear-gradient(135deg, #E8D4C4 0%, #D4A574 100%);
    border: 1px solid #B8935F;
    color: #5D4E37;
}

/* äº‘ç«¯èŠ‚ç‚¹ - ç°è“è‰² */
.node-tab.cloud-blue {
    background: linear-gradient(135deg, #C4D8E8 0%, #7BA7D4 100%);
    border: 1px solid #5A8AB8;
    color: #374A5D;
}

/* æ´»è·ƒçŠ¶æ€ - æäº®å‘å…‰ */
.node-tab.active-glow {
    box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.6),
                0 0 16px 4px rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
    z-index: 10;
}
```

---

è¿™ä¸ªè®¾è®¡ç¬¦åˆä½ çš„éœ€æ±‚å—ï¼Ÿéœ€è¦æˆ‘è°ƒæ•´ä»€ä¹ˆç»†èŠ‚ï¼Ÿ
