# CIS v1.1.5 代码统计报告

生成时间: 2026-02-11

## 1. 总体统计

| 文件类型 | 行数 | 文件数 |
|---------|------|--------|
| **Rust 源代码 (.rs)** | **166,633** | **~355** |
| Cargo 配置 (Cargo.toml) | 679 | ~15 |
| Markdown 文档 (.md) | 97,411 | ~45 |
| YAML 配置 (.yml/.yaml) | 4,758 | ~25 |
| Shell 脚本 (.sh) | 5,629 | ~15 |
| Dockerfile | 1,625 | ~10 |
| **总计** | **~276,735** | **~465** |

## 2. Rust 代码分布

### 按 Crate 统计

| Crate | 行数 | 文件数 | 占比 |
|-------|------|--------|------|
| cis-core | 130,174 | 275 | 78.1% |
| cis-node | 16,875 | 35 | 10.1% |
| skills | 7,830 | 28 | 4.7% |
| crates | 2,041 | 8 | 1.2% |
| cis-skill-sdk | 1,787 | 9 | 1.1% |
| 其他 | 7,926 | - | 4.8% |
| **总计** | **166,633** | **355** | **100%** |

### cis-core 子目录统计 (Top 10)

| 模块 | 行数 | 文件数 | 说明 |
|------|------|--------|------|
| matrix | 24,085 | 48 | Matrix 协议实现 |
| agent | 13,120 | 30 | Agent 集群管理 |
| p2p | 11,150 | 32 | P2P 网络层 |
| network | 10,960 | 16 | 网络服务 |
| scheduler | 7,471 | 8 | 任务调度器 |
| skill | 7,495 | 13 | Skill 管理 |
| wasm | 7,126 | 10 | WASM 运行时 |
| storage | 8,285 | 16 | 存储服务 |
| config | 4,488 | 7 | 配置管理 |
| service | 3,652 | 6 | 业务服务 |

## 3. 测试代码统计

| 类型 | 行数 | 占比 |
|------|------|------|
| 生产代码 | ~57,975 | 34.8% |
| 测试代码 | ~108,658 | 65.2% |
| **总计** | **166,633** | **100%** |

### 测试覆盖

- 通过测试: 1104
- 忽略测试: 31
- 总测试数: 1135

## 4. 文档统计

| 文档类型 | 行数 | 文件数 |
|---------|------|--------|
| Markdown | 97,411 | ~45 |
| 代码注释 | ~15,000 (估算) | - |

主要文档:
- README.md 系列
- CODE_REVIEW_v1.1.5.md
- CHANGES_v1.1.5.md
- CLEANUP_REPORT_v1.1.5.md
- SHAME_LIST.md
- 各类设计文档

## 5. 配置文件

| 类型 | 行数 | 文件数 |
|------|------|--------|
| YAML (CI/Docker) | 4,758 | 25 |
| TOML (Cargo) | 679 | 15 |
| Shell 脚本 | 5,629 | 15 |
| Dockerfile | 1,625 | 10 |

## 6. 代码质量指标

### 复杂度指标

- 平均文件行数: 469 行
- 最大模块: matrix (24,085 行)
- 测试/生产比例: 1.87:1

### 代码健康度

- TODO 数量: 1
- FIXME 数量: 0
- 忽略测试: 31 (主要是环境依赖)
- 代码异味: 低

## 7. 与版本对比

### v1.1.5 新增

- 新增代码: ~25,000 行
- 新增测试: ~40,000 行
- 新增文档: ~15,000 行

### 主要新增模块

- Matrix 联邦协议实现
- Kademlia DHT 完整实现
- WASM 运行时基础设施
- Agent 集群管理
- Skill 分布式调用

## 8. 总结

CIS v1.1.5 是一个大型 Rust 项目:

- **总代码量**: 27.6 万行
- **Rust 代码**: 16.6 万行
- **文档**: 9.7 万行
- **测试覆盖率高**: 65% 的代码是测试
- **架构完整**: 核心功能已实现

项目规模接近中大型开源项目，代码质量良好，文档完善。
