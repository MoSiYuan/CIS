# CIS Docker å®é™…ç»„ç½‘æµ‹è¯•ç»“æœ

## æµ‹è¯•æ—¶é—´
2026-02-09 11:32

## ç»„ç½‘æµç¨‹æµ‹è¯•

### Step 1: ç”Ÿæˆé…å¯¹ç  âœ…
```bash
docker exec cis-node1 cis-node pair generate
```
**ç»“æœ**: æˆåŠŸ
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸ”¢ ç»„ç½‘é…å¯¹ç                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘       416489                             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  â±ï¸  æœ‰æ•ˆæœŸ: 2åˆ†é’Ÿ                        â•‘
â•‘  ğŸ“Œ èŠ‚ç‚¹: cis-node1                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Step 2: åŠ å…¥ç½‘ç»œ âš ï¸ éƒ¨åˆ†æˆåŠŸ
```bash
docker exec cis-node2 cis-node pair join 416489 --address 172.30.1.11:6768
```
**ç»“æœ**: æ”¶åˆ°è¯·æ±‚ï¼Œä½†æœ€åè¶…æ—¶
```
ğŸ” æ­£åœ¨ä½¿ç”¨ç»„ç½‘ç  416489 æŸ¥æ‰¾èŠ‚ç‚¹...
ğŸ“¥ æ”¶åˆ°ç»„ç½‘è¯·æ±‚æ¥è‡ª: unknown (172.30.1.12:43719)
âœ… ç»„ç½‘æˆåŠŸ!
   èŠ‚ç‚¹ID: unknown
   ç«¯ç‚¹: 172.30.1.12:43719
âŒ ç»„ç½‘å¤±è´¥: P2P error: No response from target
```

## Room çŠ¶æ€æ£€æŸ¥

### é‚»å±…åˆ—è¡¨
```bash
docker exec cis-node1 cis-node neighbor list
# ç»“æœ: æœªå‘ç°ä»»ä½•èŠ‚ç‚¹
```

### Federation çŠ¶æ€
```bash
docker exec cis-node1 cis-node network status
# ç»“æœ: Network ACL not initialized
```

## ç»“è®º

### âœ… æˆåŠŸéƒ¨åˆ†
1. **é…å¯¹ç ç”Ÿæˆ** - 6ä½æ•°å­—ç ç”ŸæˆæˆåŠŸ
2. **UDP ç›‘å¬** - ç«¯å£ 6768 ç›‘å¬æ­£å¸¸
3. **è¯·æ±‚æ¥æ”¶** - node1 æ”¶åˆ° node2 çš„é…å¯¹è¯·æ±‚
4. **åˆå§‹æ¡æ‰‹** - æˆåŠŸè¯†åˆ«å¯¹ç«¯ (172.30.1.12:43719)

### âš ï¸ é—®é¢˜éƒ¨åˆ†
1. **æœ€ç»ˆç¡®è®¤è¶…æ—¶** - ç»„ç½‘æµç¨‹æœ€åä¸€æ­¥æ— å“åº”
2. **é‚»å±…æœªå»ºç«‹** - é…å¯¹åæœªè‡ªåŠ¨æ·»åŠ ä¸ºé‚»å±…
3. **UDP å¹¿æ’­å—é™** - Docker å†…éƒ¨ç½‘ç»œå¹¿æ’­æ— æ³•å‘ç°

### åŸå› åˆ†æ
1. Pair æœåŠ¡å®ç°å¯èƒ½ä¸å®Œæ•´ï¼Œç¼ºå°‘æœ€ç»ˆçš„ç¡®è®¤å“åº”
2. Docker å†…éƒ¨ç½‘ç»œ UDP å¹¿æ’­è¢«éš”ç¦»
3. éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ neighbor add å®Œæˆé‚»å±…å…³ç³»

## å»ºè®®

1. **å®Œå–„ pair æœåŠ¡** - æ·»åŠ å®Œæ•´çš„æ¡æ‰‹ç¡®è®¤æœºåˆ¶
2. **ä½¿ç”¨ TCP æ›¿ä»£ UDP** - æé«˜å¯é æ€§
3. **è‡ªåŠ¨æ·»åŠ é‚»å±…** - é…å¯¹æˆåŠŸåè‡ªåŠ¨æ‰§è¡Œ neighbor add
4. **æ·»åŠ è¯¦ç»†æ—¥å¿—** - ä¾¿äºæ’æŸ¥ç½‘ç»œé—®é¢˜

## æµ‹è¯•ç¯å¢ƒ

- é•œåƒ: cis-runtime:latest (171MB)
- ç½‘ç»œ: test-network_cis-net (172.30.0.0/16)
- èŠ‚ç‚¹: 3ä¸ªå®¹å™¨è¿è¡Œæ­£å¸¸
- è¿é€šæ€§: ping æµ‹è¯•é€šè¿‡ (0.05-4ms)
