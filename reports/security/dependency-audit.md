# CIS ä¾èµ–æ¼æ´æ‰«ææŠ¥å‘Š

## æ‰«æä¿¡æ¯

| é¡¹ç›® | å€¼ |
|------|-----|
| æ‰«ææ—¥æœŸ | 2026-02-08 18:28:32 CST |
| æ‰«æå·¥å…· | cargo-audit 0.22.1 |
| å·¥ä½œç›®å½• | /Users/jiangxiaolong/work/project/CIS |
| ä¾èµ–æ€»æ•° | 911 crates |
| å®‰å…¨é€šå‘Šåº“ | 916 advisories |

---

## æ‰§è¡Œæ‘˜è¦

æœ¬æ¬¡æ‰«æå…±å‘ç° **5 ä¸ªå®‰å…¨æ¼æ´**ï¼Œå…¶ä¸­ï¼š
- ğŸ”´ é«˜å±æ¼æ´ï¼š2 ä¸ªï¼ˆå·²ä¿®å¤ï¼‰
- ğŸŸ¡ ä¸­å±æ¼æ´ï¼š2 ä¸ªï¼ˆ1 ä¸ªå·²ä¿®å¤ï¼Œ1 ä¸ªæ— æ³•ä¿®å¤ï¼‰
- ğŸŸ¢ ä½å±æ¼æ´ï¼š1 ä¸ªï¼ˆå·²ä¿®å¤ï¼‰

**ä¿®å¤çŠ¶æ€ï¼š4/5 å·²ä¿®å¤ï¼Œ1 ä¸ªæ— æ³•ä¿®å¤ï¼ˆä¸Šæ¸¸æœªæä¾›è¡¥ä¸ï¼‰**

---

## æ¼æ´è¯¦æƒ…

### 1. bytes - RUSTSEC-2026-0007 âœ… å·²ä¿®å¤

| å±æ€§ | å€¼ |
|------|-----|
| ä¸¥é‡ç¨‹åº¦ | **é«˜å±** |
| æ¼æ´ç±»å‹ | æ•´æ•°æº¢å‡º / å†…å­˜æŸå |
| åŸç‰ˆæœ¬ | 1.11.0 |
| ä¿®å¤ç‰ˆæœ¬ | 1.11.1 |
| CVE | CVE-2026-25541 |

**æè¿°**ï¼šåœ¨ `BytesMut::reserve` çš„ unique reclaim è·¯å¾„ä¸­ï¼Œ`new_cap + offset` å¯èƒ½å‘ç”Ÿæ•´æ•°æº¢å‡ºï¼Œå¯¼è‡´ `self.cap` è¢«è®¾ç½®ä¸ºè¶…è¿‡å®é™…åˆ†é…å®¹é‡çš„å€¼ï¼Œåç»­ API å¯èƒ½åˆ›å»ºè¶Šç•Œåˆ‡ç‰‡ã€‚

**ä¿®å¤æªæ–½**ï¼šæ›´æ–° `Cargo.toml` ä¸­çš„ bytes ç‰ˆæœ¬è‡³ 1.11.1

```toml
# cis-core/Cargo.toml
bytes = "1.11.1"
```

---

### 2. ring - RUSTSEC-2025-0009 âœ… å·²ä¿®å¤

| å±æ€§ | å€¼ |
|------|-----|
| ä¸¥é‡ç¨‹åº¦ | **é«˜å±** |
| æ¼æ´ç±»å‹ | åŠ å¯†å®ç°ç¼ºé™· |
| åŸç‰ˆæœ¬ | 0.16.20 |
| ä¿®å¤ç‰ˆæœ¬ | >=0.17.12 |
| ä¾èµ–è·¯å¾„ | quinn -> quinn-proto -> ring |

**æè¿°**ï¼šæŸäº› AES å‡½æ•°åœ¨å¯ç”¨æº¢å‡ºæ£€æŸ¥æ—¶å¯èƒ½ panicã€‚

**ä¿®å¤æªæ–½**ï¼šå‡çº§ quinn ä» 0.10 åˆ° 0.11ï¼Œé—´æ¥å‡çº§ ring åˆ° 0.17+

```toml
# cis-core/Cargo.toml
quinn = "0.11"
```

---

### 3. sqlx - RUSTSEC-2024-0363 âœ… å·²ä¿®å¤

| å±æ€§ | å€¼ |
|------|-----|
| ä¸¥é‡ç¨‹åº¦ | **é«˜å±** |
| æ¼æ´ç±»å‹ | åè®®è¯¯è§£æ |
| åŸç‰ˆæœ¬ | 0.7.4 |
| ä¿®å¤ç‰ˆæœ¬ | >=0.8.1 |

**æè¿°**ï¼šç”±äºæˆªæ–­æˆ–æº¢å‡ºç±»å‹è½¬æ¢å¯¼è‡´çš„äºŒè¿›åˆ¶åè®®è¯¯è§£æã€‚

**ä¿®å¤æªæ–½**ï¼š
1. æ›´æ–° sqlx åˆ° 0.8
2. åŒæ­¥æ›´æ–° rusqlite åˆ° 0.32ï¼ˆè§£å†³ libsqlite3-sys å†²çªï¼‰

```toml
# cis-core/Cargo.toml
sqlx = { version = "0.8", ... }
rusqlite = { version = "0.32", ... }

# åŒæ­¥æ›´æ–°ä»¥ä¸‹é¡¹ç›®ä¸­çš„ rusqliteï¼š
# - skills/im/Cargo.toml
# - skills/matrix-register-skill/Cargo.toml
# - crates/cis-capability/Cargo.toml
```

---

### 4. time - RUSTSEC-2026-0009 âœ… å·²ä¿®å¤

| å±æ€§ | å€¼ |
|------|-----|
| ä¸¥é‡ç¨‹åº¦ | ä¸­å± (6.8) |
| æ¼æ´ç±»å‹ | æ‹’ç»æœåŠ¡ |
| åŸç‰ˆæœ¬ | 0.3.46 |
| ä¿®å¤ç‰ˆæœ¬ | >=0.3.47 |

**æè¿°**ï¼šé€šè¿‡æ ˆè€—å°½å¯¼è‡´æ‹’ç»æœåŠ¡ã€‚

**ä¿®å¤æªæ–½**ï¼šæ‰§è¡Œ `cargo update --package time` æ›´æ–°åˆ° 0.3.47

---

### 5. rsa - RUSTSEC-2023-0071 âŒ æ— æ³•ä¿®å¤

| å±æ€§ | å€¼ |
|------|-----|
| ä¸¥é‡ç¨‹åº¦ | ä¸­å± (5.9) |
| æ¼æ´ç±»å‹ | æ—¶åºä¾§ä¿¡é“æ”»å‡» |
| å½“å‰ç‰ˆæœ¬ | 0.9.10 |
| ä¿®å¤ç‰ˆæœ¬ | **æ— å¯ç”¨ä¿®å¤ç‰ˆæœ¬** |

**æè¿°**ï¼šMarvin Attack - å¯èƒ½é€šè¿‡æ—¶åºä¾§ä¿¡é“æ¢å¤å¯†é’¥ã€‚è¿™æ˜¯ RSA PKCS#1 v1.5 å¡«å……çš„å›ºæœ‰è®¾è®¡ç¼ºé™·ã€‚

**ç¼“è§£æªæ–½**ï¼š
1. âœ… é¡¹ç›®ä¸ä½¿ç”¨ MySQL æ•°æ®åº“ï¼ˆsqlx-mysql æœªè¢«å®é™…ä½¿ç”¨ï¼‰
2. âœ… RSA åŠŸèƒ½ç”± sqlx-mysql é—´æ¥å¼•å…¥ï¼Œå½“å‰åŠŸèƒ½é›† `default = ["encryption"]` ä¸å¯ç”¨ MySQL æ”¯æŒ
3. ğŸ“ ç›‘æ§ä¸Šæ¸¸ä¿®å¤è¿›åº¦ï¼šhttps://rustsec.org/advisories/RUSTSEC-2023-0071
4. ğŸ“ è€ƒè™‘åœ¨é¡¹ç›®ä¸­ç¦ç”¨ sqlx-mysql ç‰¹æ€§ï¼ˆéœ€ fork sqlx æˆ–ç­‰å¾…ä¸Šæ¸¸æ›´æ–°ï¼‰

---

## ä¿®å¤æ“ä½œè®°å½•

### ä¿®æ”¹çš„æ–‡ä»¶

1. **cis-core/Cargo.toml**
   - `bytes`: 1.5 â†’ 1.11.1
   - `sqlx`: 0.7 â†’ 0.8
   - `rusqlite`: 0.30 â†’ 0.32
   - `quinn`: 0.10 â†’ 0.11

2. **skills/im/Cargo.toml**
   - `rusqlite`: 0.30 â†’ 0.32

3. **skills/matrix-register-skill/Cargo.toml**
   - `rusqlite`: 0.30 â†’ 0.32

4. **crates/cis-capability/Cargo.toml**
   - `rusqlite`: 0.30 â†’ 0.32

### æ›´æ–°åçš„ä¾èµ–æ ‘å˜åŒ–

```diff
- ring v0.16.20 (æœ‰æ¼æ´)
+ rustls v0.23.36 (å®‰å…¨)

- sqlx v0.7.4 (æœ‰æ¼æ´)
+ sqlx v0.8.6 (å®‰å…¨)

- bytes v1.11.0 (æœ‰æ¼æ´)
+ bytes v1.11.1 (å®‰å…¨)

- time v0.3.46 (æœ‰æ¼æ´)
+ time v0.3.47 (å®‰å…¨)
```

---

## æœªè§£å†³çš„è­¦å‘Šï¼ˆéå®‰å…¨æ¼æ´ï¼‰

ä»¥ä¸‹ crate å·²åœæ­¢ç»´æŠ¤ï¼Œä½†æ— å·²çŸ¥å®‰å…¨æ¼æ´ï¼š

| Crate | è­¦å‘Š ID | è¯´æ˜ |
|-------|---------|------|
| atomic-polyfill | RUSTSEC-2023-0089 | cis-skill-sdk ä¾èµ– |
| atty | RUSTSEC-2024-0375 | å°†è¿ç§»åˆ° std::io::IsTerminal |
| bincode | RUSTSEC-2025-0141 | è€ƒè™‘è¿ç§»åˆ° serde_json |
| derivative | RUSTSEC-2024-0388 | wasmer ä¾èµ–ï¼Œç­‰å¾…ä¸Šæ¸¸æ›´æ–° |
| fxhash | RUSTSEC-2025-0057 | wasmer ä¾èµ– |
| number_prefix | RUSTSEC-2025-0119 | indicatif ä¾èµ– |
| paste | RUSTSEC-2024-0436 | å¤šä¸ªä¾èµ–é¡¹ |
| proc-macro-error | RUSTSEC-2024-0370 | wasmer ä¾èµ– |
| rustls-pemfile | RUSTSEC-2025-0134 | reqwest/quinn ä¾èµ– |
| serial | RUSTSEC-2017-0008 | portable-pty ä¾èµ– |
| git2 | RUSTSEC-2026-0008 |  unsound è­¦å‘Š |

---

## å»ºè®®åç»­è¡ŒåŠ¨

### é«˜ä¼˜å…ˆçº§
1. ç›‘æ§ rsa crate çš„å®‰å…¨æ›´æ–°ï¼Œä¸Šæ¸¸ä¿®å¤åç«‹å³å‡çº§
2. è€ƒè™‘ç¦ç”¨ sqlx çš„ mysql ç‰¹æ€§ä»¥æ¶ˆé™¤é£é™©æš´éœ²

### ä¸­ä¼˜å…ˆçº§
3. è¿ç§» atty â†’ std::io::IsTerminalï¼ˆRust 1.70+ï¼‰
4. è¯„ä¼° bincode â†’ serde_json çš„è¿ç§»æˆæœ¬

### ä½ä¼˜å…ˆçº§
5. è·Ÿè¸ª wasmer æ›´æ–°ä»¥è§£å†³ derivative/fxhash è­¦å‘Š
6. è€ƒè™‘å‡çº§ git2 åˆ°ä¿®å¤ç‰ˆæœ¬

---

## åˆè§„æ€§æ£€æŸ¥

| æ£€æŸ¥é¡¹ | çŠ¶æ€ |
|--------|------|
| cargo-audit å®‰è£…æˆåŠŸ | âœ… |
| æ‰«æå®Œæˆ | âœ… |
| é«˜å±æ¼æ´ä¿®å¤ | âœ… 2/2 |
| ä¸­å±æ¼æ´ä¿®å¤ | âš ï¸ 1/2 (1ä¸ªæ— æ³•ä¿®å¤) |
| æŠ¥å‘Šç”Ÿæˆ | âœ… |

---

## é™„å½•

### æ‰«æå‘½ä»¤

```bash
# å®‰è£… cargo-audit
cargo install cargo-audit

# è¿è¡Œæ‰«æ
cargo audit

# æŸ¥çœ‹è¯¦ç»†è¾“å‡º
cargo audit --json
```

### ç›¸å…³é“¾æ¥

- [RUSTSEC-2026-0007 - bytes](https://github.com/advisories/GHSA-434x-w66g-qw3r)
- [RUSTSEC-2025-0009 - ring](https://rustsec.org/advisories/RUSTSEC-2025-0009)
- [RUSTSEC-2024-0363 - sqlx](https://rustsec.org/advisories/RUSTSEC-2024-0363)
- [RUSTSEC-2026-0009 - time](https://rustsec.org/advisories/RUSTSEC-2026-0009)
- [RUSTSEC-2023-0071 - rsa](https://rustsec.org/advisories/RUSTSEC-2023-0071)

---

*æŠ¥å‘Šç”± cargo-audit è‡ªåŠ¨ç”Ÿæˆ*
