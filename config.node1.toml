# CIS (Cluster of Independent Systems) 配置示例
# 
# 配置文件位置：
# - 开发模式: ~/.cis/config.toml 或 <Git项目>/.cis/config.toml
# - Release模式: <可执行文件目录>/.cis/config.toml
# - 可通过环境变量 CIS_DATA_DIR 覆盖

# ==================== 节点配置 ====================
[node]
# 节点唯一标识（自动生成，不建议手动修改）
id = "550e8400-e29b-41d4-a716-446655440000"

# 节点名称（显示用）
name = "my-node"

# 节点密钥（用于联邦网络身份验证，自动生成）
# ⚠️ 重要：请妥善保管，不要提交到 Git
key = "<auto-generated>"

# ==================== AI 配置 ====================
[ai]
# 默认 AI Provider: claude | kimi | aider
default_provider = "claude"

[ai.claude]
# Claude Code 配置
model = "claude-sonnet-4-20250514"
max_tokens = 4096
temperature = 0.7

[ai.kimi]
# Kimi Code 配置
model = "kimi-k2"
max_tokens = 8192

[ai.aider]
# Aider 配置
model = "gpt-4"

# ==================== 存储配置 ====================
[storage]
# 自动备份数量
max_backups = 10

# 备份间隔（天）
backup_interval_days = 7

# ==================== 向量配置 ====================
[vector]
# 嵌入向量维度: 384 | 768 | 1024 | 1536
# 不同维度对应不同模型：
#   384  - all-MiniLM-L6-v2 (本地，快速)
#   768  - all-mpnet-base-v2 (本地，质量更好)
#   1536 - text-embedding-3-small (OpenAI，需要 API key)
embedding_dim = 384

# 是否启用 HNSW 索引（推荐启用）
use_hnsw = true

# 相似度阈值（0-1，越高越严格）
default_threshold = 0.7

# ==================== 记忆配置 ====================
[memory]
# 私域记忆加密密钥（自动生成）
# ⚠️ 重要：修改此密钥将导致已有的私域记忆无法解密
# encryption_key = "<auto-generated>"

# 默认记忆命名空间
namespace = "default"

# 自动分类开关
auto_categorize = true

# ==================== 联邦网络配置 ====================
[federation]
# 启用联邦网络
enabled = false

# 节点监听地址
listen_address = "0.0.0.0:7676"

# 外部可访问地址（用于 NAT 场景）
# external_address = "your-domain.com:7676"

# 联邦 ID（用于多节点识别）
federation_id = "default"

# 信任节点列表（DID 列表）
trusted_nodes = []

# ==================== P2P 网络配置 ====================
[p2p]
# 启用 P2P 网络
enabled = false

# 监听端口（UDP）
listen_port = 7677

# 引导节点列表
# bootstrap_nodes = [
#     "/ip4/192.168.1.100/udp/7677/quic-v1"
# ]

# mDNS 发现
mdns_enabled = true

# 同步间隔（秒）
sync_interval_sec = 60

# ==================== IM 配置 ====================
[im]
# 启用 IM 功能
enabled = true

# 消息保留天数
message_retention_days = 30

# 会话自动归档天数
session_archive_days = 7

# ==================== 遥测配置 ====================
[telemetry]
# 启用请求日志
enabled = true

# 日志保留天数
log_retention_days = 30

# 最大日志条目数
max_entries = 10000

# ==================== 日志配置 ====================
[log]
# 日志级别: trace | debug | info | warn | error
level = "info"

# 是否输出到文件
file_output = true

# 日志文件轮转
file_rotation = "daily"

# ==================== 开发者配置 ====================
[dev]
# 调试模式
debug = false

# 详细输出
verbose = false

# WASM 运行时配置
wasm_max_memory_mb = 128
wasm_timeout_sec = 30
